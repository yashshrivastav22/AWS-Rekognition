<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Video Analysis</title>
</head>
<body>
   <h1>Upload Video</h1>
   <form action="/upload" method="post" enctype="multipart/form-data">
       <input type="file" name="file" accept="video/*">
       <button type="submit">Upload</button>
   </form>
   <h1>Search Objects</h1>
   <label for="objectName">Object Name:</label>
   <input type="text" id="objectName" placeholder="Enter object name">
   <button type="button" onclick="search()">Search</button>

   <div id="results"></div>
   <script>
       function search() {
           var objectName = document.getElementById('objectName').value;
           if (!objectName) {
               alert('Please enter an object name');
               return;
           }
           fetch('/search?object_name=' + objectName)
               .then(response => response.json())
               .then(data => {
                   var resultsDiv = document.getElementById('results');
                   resultsDiv.innerHTML = '';
                   if (data.error) {
                       resultsDiv.innerHTML = '<p>Error: ' + data.error + '</p>';
                   } else {
                       resultsDiv.innerHTML = '<h2>' + data.object_name + '</h2>';
                       if (data.timestamps.length === 0) {
                           resultsDiv.innerHTML += '<p>No timestamps found</p>';
                       } else {
                           resultsDiv.innerHTML += '<ul>';
                           data.timestamps.forEach(timestamp => {
                               resultsDiv.innerHTML += '<li>' + timestamp + '</li>';
                            });
                           resultsDiv.innerHTML += '</ul>';
                       }
                   }
               })
               .catch(error => {
                   console.error('Error:', error);
                   var resultsDiv = document.getElementById('results');
                   resultsDiv.innerHTML = '<p>Error occurred</p>';
               });
       }
   </script>
</body>
</html>
